import{t as H,p as V,n as W,o as P,B as S,I as q,q as z,r as O,T as I,g as L,v as U,P as J,E as K,G as Q}from"./BT582r-9.js";import{c as X,d as Y,a as Z,e as ee,f as ne,g as re}from"./BTn_Dqgu.js";import{e as T,u as w}from"./BBqiwJj7.js";import{j as p,c as d,o as a,F as oe,M as te,f as i,D as y,_ as $,w as h,C as se,an as ae,k as b,a as E,b as k,p as M,n as t,a0 as ce,r as F,a5 as j,t as x,E as ie,ao as de,G as le}from"./6BEYmDlK.js";function v(){T();const e=w().name,r={...X(),[P]:V,[W]:H}[e];if(!r)throw new Error(`Failed to find renderer for element "${e}"!`);return r}async function A(){T();const o=w();if(o instanceof S||o instanceof q)return{error:o.error};const e=v();try{return o.renderData=await ue(),{ElementComponent:await e.component()}}catch(n){return{error:n instanceof Error?n:new Error(String(n))}}}async function ue(){const o=w(),e=Y(),r=v().renderDataGenerator,s=await z({node:o,storage:e.renderDataStorage,generator:r});if(s){if(s.type==="error")throw new Error(s.message);return s.data}}const _e=p({__name:"RenderGroup",props:{node:{}},setup(o){const e=o,n=Z();if(e.node instanceof O&&e.node.hasChildren()){const r={};for(const s of e.node.children)s instanceof I&&(s.parseData=n(s.parseData,r))}return(r,s)=>(a(!0),d(oe,null,te(r.node.children??[],c=>(a(),i(Fe,{node:c},null,8,["node"]))),256))}}),B=p({__name:"BlockFloat",props:{position:{}},setup(o){return(e,n)=>(a(),d("div",{class:y({"bitran-blockFloat":!0,[`bitran-blockFloat--${e.position}`]:!0})},null,2))}}),pe={};function me(o,e){return a(),i(ae,{name:"bitran-transition--fade"},{default:h(()=>[se(o.$slots,"default")]),_:3})}const fe=$(pe,[["render",me]]),ve={class:"bitran-blockAside"},he={class:"bitran-blockAsideInner"},ke=["innerHTML"],be=p({__name:"BlockAside",props:{node:{},hovered:{type:Boolean},error:{}},async setup(o){let e,n;const r=v(),s=([e,n]=b(()=>L(r)),e=await e,n(),e);return(c,l)=>(a(),d("div",ve,[E("div",he,[k(fe,null,{default:h(()=>[c.hovered||c.error?(a(),d("div",{key:0,class:"bitran-blockAsideIcon",innerHTML:t(s)},null,8,ke)):M("",!0)]),_:1})])]))}}),ye=["id"],Ee={key:1,class:"bitran-block"},ge={class:"bitran-blockMain"},we={key:0},$e=p({__name:"Block",props:{node:{}},async setup(o){let e,n;const r=o,s=v(),c=ce("block"),l=F(!1),m=(()=>{if(!(r.node instanceof S))return""+r.node.id})(),{ElementComponent:f,error:u}=([e,n]=b(()=>A()),e=await e,n(),e);return j(()=>{c.value.addEventListener("mouseenter",()=>{l.value=!0}),c.value.addEventListener("mouseleave",()=>{l.value=!1})}),(_,g)=>(a(),d("div",{ref:"block",id:t(m),class:y({"bitran-blockContainer":!0,"bitran-blockContainer--hover":l.value,"bitran-error":t(u)})},[k(B,{position:"above"}),t(s).customLayout&&!t(u)?(a(),i(t(f),{key:0,node:_.node},null,8,["node"])):(a(),d("div",Ee,[k(be,{node:_.node,hovered:l.value,error:t(u)},null,8,["node","hovered","error"]),E("div",ge,[t(u)?(a(),d("div",we,x(t(u)),1)):(a(),i(t(f),{key:1,node:_.node,class:y(_.node.meta.classes)},null,8,["node","class"]))])])),k(B,{position:"below"})],10,ye))}}),Ce={};function Re(o,e){return a(),d("div",null,"Block loading...")}const Ne=$(Ce,[["render",Re]]),De={key:0,class:y({"bitran-inliner":!0,"bitran-error":!0})},Be=["innerHTML"],Se=p({__name:"Inliner",props:{node:{}},async setup(o){let e,n;const{ElementComponent:r,error:s}=([e,n]=b(()=>A()),e=await e,n(),e),c=v(),l=([e,n]=b(()=>L(c)),e=await e,n(),e);return(m,f)=>t(s)?(a(),d("span",De,[E("span",{class:"bitran-inlinerErrorIcon",innerHTML:t(l)},null,8,Be),E("span",null,x(t(s)),1)])):(a(),i(t(r),{key:1,node:m.node},null,8,["node"]))}}),Ie={};function Le(o,e){return a(),d("span",null,"Inliner loading...")}const Te=$(Ie,[["render",Le]]),Me=p({__name:"RenderElement",props:{node:{}},async setup(o){let e,n;const r=o,s=r.node instanceof U,c=ee(),l=ne(),m=re(),f=v(),u=m.value?"client":r.node instanceof J||r.node instanceof I||f.ssr?"hybrid":"client",_=D=>ie(D,{node:r.node}),g=_(s?$e:Se),G=_(s?Ne:Te);let C=!0;const R=f.canRender;!m.value&&R&&(C=([e,n]=b(()=>R({isDev:c.isDev,isProd:c.isDev===void 0?void 0:!c.isDev,isServer:c.isServer,isClient:c.isServer===void 0?void 0:!c.isServer,node:r.node})),e=await e,n(),e));const N=F(!1);return j(()=>setTimeout(()=>N.value=!0,500)),(D,je)=>t(C)?(a(),i(t(l),{key:0,mode:t(u)},{default:h(()=>[t(u)==="hybrid"?(a(),i(t(g),{key:0})):(a(),i(de,{key:1},{fallback:h(()=>[N.value?(a(),i(t(G),{key:0})):(a(),i(le(s?"div":"span"),{key:1}))]),default:h(()=>[k(t(g))]),_:1}))]),_:1},8,["mode"])):M("",!0)}}),Fe=p({__name:"Render",props:{node:{}},setup(o){const e=o,n=(()=>{switch(!0){case e.node instanceof Q:return _e;case e.node instanceof K:return Me;default:throw new Error(`Unsupported node "${e.node.constructor.name}"!`)}})();return(r,s)=>(a(),i(t(n),{node:r.node},null,8,["node"]))}});export{Fe as _,v as u};
