import{s as B,_ as E,d as N}from"./fqFNHTKt.js";import{A as j,q as w,o as m,a1 as T,I as n,E as i,r as c,v as M,c as y,F as g,ac as R,s as L,a0 as S,j as D,a5 as V,x as F,_ as b,Z as H,Q as I,a as O,aj as P,aH as z,Y as q,aI as x}from"./ma-yzDba.js";const Q=["href"],Y=["innerHTML"],Z=["href"],G=j({__name:"MainCameoData",props:{data:{},hasMultipleCameos:{type:Boolean}},emits:["nextCameo"],setup(d,{emit:_}){const l=d,o=_;function h(a){const r=a.avatars;if(!r||r.length===0)throw new Error(`No avatars available for the cameo with ID: ${a.cameoId}`);const u=r[Math.floor(Math.random()*r.length)];let p=N(u,"image","video");return{url:u,type:p}}const{url:k}=h(l.data),v=l.data.messages[Math.floor(Math.random()*l.data.messages.length)];return(a,r)=>{const u=E,p=R,e=S,t=V;return m(),w("div",{class:n(a.$style.cameoData),style:T({"--cameoColor":a.data.color??("stringColor"in a?a.stringColor:i(B))(a.data.cameoId)})},[c("a",{href:a.data.link,class:n(a.$style.avatar),target:"_blank"},[M(u,{src:i(k),color:a.data.color??("stringColor"in a?a.stringColor:i(B))(a.data.cameoId),styling:{glow:!0,border:!0}},null,8,["src","color"])],10,Q),c("div",{class:n(a.$style.info)},[c("div",{class:n(a.$style.triangleBorder)},[c("div",{class:n(a.$style.triangle)},null,2)],2),c("div",{class:n(a.$style.message),innerHTML:i(v)},null,10,Y),c("footer",null,[a.data.icon?(m(),y(p,{key:0,name:"cameo-icon",svg:a.data.icon,class:n(a.$style.icon)},null,8,["svg","class"])):g("",!0),c("a",{class:n(a.$style.name),href:a.data.link,target:"_blank"},L(a.data.name),11,Z),a.data.link?(m(),y(e,{key:1,class:n(a.$style.external),name:"link-external"},null,8,["class"])):g("",!0),r[1]||(r[1]=c("span",{style:{flex:1}},null,-1)),c("span",{class:n(a.$style.actions)},[i(D).sponsors?(m(),y(t,{key:0,to:"/sponsors/"},{default:F(()=>[M(e,{name:"cameo-add"})]),_:1})):g("",!0),a.hasMultipleCameos?(m(),y(e,{key:1,name:"arrow-left",onClick:r[0]||(r[0]=s=>o("nextCameo")),style:{transform:"scale(-1)"}})):g("",!0)],2)])],2)],6)}}}),J="_cameoData_ywijk_1",U="_avatar_ywijk_11",W="_info_ywijk_19",X="_message_ywijk_46",K="_icon_ywijk_60",aa="_name_ywijk_63",ea="_external_ywijk_74",ta="_actions_ywijk_79",oa="_triangle_ywijk_103",sa="_triangleBorder_ywijk_104",na={cameoData:J,avatar:U,info:W,message:X,icon:K,name:aa,external:ea,actions:ta,triangle:oa,triangleBorder:sa},ra={$style:na},la=Object.assign(b(G,[["__cssModules",ra]]),{__name:"MainCameoData"}),$="cameo",ca=j({__name:"MainCameo",setup(d){const _=H(),l=I(),o=I();async function h(){var e;o.value=(e=_.payload.data)[$]||(e[$]={cameos:Object.fromEntries((await $fetch("/api/cameo/ids",{responseType:"json"})).map(t=>[t,null])),sponsorCameos:Object.fromEntries((await $fetch("/api/sponsor/cameo/ids",{responseType:"json"})).map(t=>[t,null]))}),!(Object.keys(o.value.cameos).length===0&&Object.keys(o.value.sponsorCameos).length===0)&&await u()}function k(){const e=Object.keys(o.value.cameos),t=Object.keys(o.value.sponsorCameos);return[...e.map(s=>({id:s,type:"cameo"})),...t.map(s=>({id:s,type:"sponsor"}))]}function v(e){const t=k();if(t.length===0)return null;const s=e?t.filter(A=>A.id!==e):t,f=s.length>0?s:t,C=Math.floor(Math.random()*f.length);return f[C]}function a(){var t;const e=(t=l.value)==null?void 0:t.cameoId;return v(e)}async function r(e,t){const s=t==="cameo"?o.value.cameos:o.value.sponsorCameos;if(s[e])return s[e];const f=t==="cameo"?`/api/cameo/data/${e}`:`/api/sponsor/cameo/data/${e}`,C=await $fetch(f,{responseType:"json"});return s[e]=C,C}async function u(){const e=a();e&&(l.value=await r(e.id,e.type))}const p=O(()=>o.value?Object.keys(o.value.cameos).length+Object.keys(o.value.sponsorCameos).length>1:!1);return P(h),(e,t)=>{const s=la;return i(l)?(m(),w("section",{key:0,class:n(e.$style.cameo)},[(m(),y(s,{key:i(l).cameoId,data:i(l),hasMultipleCameos:i(p),onNextCameo:u},null,8,["data","hasMultipleCameos"]))],2)):g("",!0)}}}),ia="_cameo_xcj7i_1",ma={cameo:ia},ua={$style:ma},ha=Object.assign(b(ca,[["__cssModules",ua]]),{__name:"MainCameo"}),_a=j({__name:"AdsBannerBottom",setup(d){return(_,l)=>{const o=z;return m(),w("section",{class:n(_.$style.darkMagicBottom)},[c("div",{class:n(_.$style.inner)},[M(o,{data:i(D).ads.bottom},null,8,["data"])],2)],2)}}}),da="_darkMagicBottom_1tpwu_1",pa="_inner_1tpwu_4",ya={darkMagicBottom:da,inner:pa},ga={$style:ya},ka=Object.assign(b(_a,[["__cssModules",ga]]),{__name:"AdsBannerBottom"});function va(){const d=q();return O(()=>x(d.path))}export{ha as _,ka as a,va as u};
