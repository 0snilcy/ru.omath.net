const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./katex.CEY6f2P4.css","./CiZs1Np1.js","./BECuGpJR.js","./entry.E0yL-eVk.css"])))=>i.map(i=>d[i]);
import{z as O,af as N,Z as l,ak as B,a2 as F,N as q,c as z,o as E,v as K,n as V,q as b,E as L,x as U,r as Z,s as j,al as G,C as J,l as c,_ as Q}from"./BECuGpJR.js";import"./BszdK3rz.js";import{u as X}from"./0Ta9vBwC.js";import{F as Y}from"./CSCaJa31.js";import{u as ee}from"./ftkzhumk.js";import"./B37nB1v5.js";import"./CD-_JqwR.js";import"./DdMeI0pO.js";const te=O({__name:"Diagram",props:{node:{}},setup(le){const M=X(),f=M.content,n=N("diagram"),v=l(f),{lightbox:g,initLightbox:D,registerCaption:P}=ee(),h=l(null),u=l(!1),w=l(null),y=l(!1),x=l(null),d=l(!1),A="__mermaid__"+B(),p={display:/\$\$(.*?)\$\$/gs,inline:new RegExp("\\$(?!\\$)(.*?)(?<!\\$)\\$","gs")};function k(e){return p.display.test(e)||p.inline.test(e)}const C=e=>new Promise(t=>setTimeout(t,e));async function T(){if(!x.value||d.value)return;await c(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),(await c(()=>import("./ChWnQ-fc.js"),[],import.meta.url)).default.render("\\sum_{i=1}^n i^2 = \\frac{n(n+1)(2n+1)}{6}",x.value,{displayMode:!0}),await C(200),d.value=!0}async function S(e){if(!k(e))return e;await c(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const t=await c(()=>import("./ChWnQ-fc.js"),[],import.meta.url);d.value||await T();const r=(o,m,_)=>o.replace(m,(ue,H)=>t.default.renderToString(H,{displayMode:_}));let a=e;return a=r(a,p.display,!0),a=r(a,p.inline,!1),a}function I(e,t){const r=["--text","--textLabel","--bgNode","--bgLabel","--border","--filled","--link"],a=getComputedStyle(e);let o="";r.forEach(m=>{const _=a.getPropertyValue(m).trim();_&&(o+=`${m}: ${_}; `)}),t.setAttribute("style",o)}function R(e){const t=Math.min(1e3,.9*window.innerWidth),r=e.clientHeight/e.clientWidth,a=e.cloneNode(!0);a.removeAttribute("width"),I(e,a);const o=document.createElement("div");o.className="pswp__img-overlay-wrapper",o.setAttribute("style","position: relative;"),o.innerHTML=`
        <div class="pswp__img" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;"></div>
        ${a.outerHTML}
    `,D({dataSource:[{html:o.outerHTML,width:t,height:t*r}]}),h.value&&P(g.value,h.value)}function W(){if(!g.value){const e=n.value.querySelector("svg");R(e)}g.value.loadAndOpen(0)}async function $(){if(n.value)try{y.value=!1,w.value=null,k(f)&&!d.value&&await T();const e=(await c(async()=>{const{default:a}=await import("./CiZs1Np1.js").then(o=>o.bA);return{default:a}},__vite__mapDeps([1,2,3]),import.meta.url)).default;e.initialize({startOnLoad:!1,securityLevel:"loose",markdownAutoWrap:!1,flowchart:{useMaxWidth:!0,padding:10,wrappingWidth:400},theme:"base"}),v.value=await S(f),await e.parse(v.value,{suppressErrors:!1});const{svg:t}=await e.render(A,v.value,n.value);n.value.innerHTML=t;const r=n.value.querySelector("svg");r==null||r.addEventListener("click",W)}catch(e){y.value=!0,w.value=e instanceof Error?e.message:String(e)}}let i=null,s=null;return F(()=>{i=new IntersectionObserver(e=>{e[0].isIntersecting&&!u.value&&(u.value=!0,$(),i==null||i.disconnect(),i=null,s&&(clearTimeout(s),s=null))},{threshold:.1,rootMargin:"50px"}),n.value&&(i.observe(n.value),s=setTimeout(()=>{if(!u.value&&n.value){const e=n.value.getBoundingClientRect(),t=window.innerHeight,r=window.innerWidth;e.top<t&&e.bottom>0&&e.left<r&&e.right>0&&(u.value=!0,$(),i==null||i.disconnect(),i=null)}s=null},2e3))}),q(()=>{i&&(i.disconnect(),i=null),s&&(clearTimeout(s),s=null)}),(e,t)=>{const r=G;return E(),z(Y,{caption:J(M).caption,onCaptionMounted:t[0]||(t[0]=a=>h.value=a)},{default:K(()=>[y.value?(E(),V("div",{key:0,class:L(e.$style.error)},[b("div",{class:L(e.$style.errorMessage)},[t[1]||(t[1]=b("span",null,"Diagram Error:",-1)),U(" "+Z(w.value),1)],2)],2)):(E(),V("div",{key:1,ref:"diagram",class:L([e.$style.diagram,!u.value&&e.$style.placeholder])},[j(r)],2)),b("div",{ref_key:"katexPreloadEl",ref:x,style:{position:"absolute",visibility:"hidden",height:"0",width:"0",overflow:"hidden"}},null,512)]),_:1},8,["caption"])}}}),ae="_diagram_1hg8c_1",re="_placeholder_1hg8c_7",ie="_error_1hg8c_29",oe="_errorMessage_1hg8c_40",ne={diagram:ae,placeholder:re,error:ie,errorMessage:oe},se={$style:ne},he=Q(te,[["__cssModules",se]]);export{he as default};
