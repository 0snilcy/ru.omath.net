import{aL as W,aM as G,aN as S,aO as H,aP as O,A as p,aQ as P,aR as L,q as d,o as a,G as U,U as q,c as i,I as y,_ as $,x as h,J as z,aS as J,B as b,r as E,v as k,F as I,E as t,af as Q,$ as M,aj as T,s as F,aT as K,aU as X,N as Y,aV as Z,O as ee,M as ne,aW as re}from"./ma-yzDba.js";import{c as oe,d as te,a as se,e as ae,f as ce,g as ie}from"./RGhjTnN3.js";import{t as de,p as le,g as x}from"./DiOTqd5X.js";import{e as j,u as w}from"./Bcd_QwTy.js";function v(){j();const e=w().name,r={...oe(),[G]:le,[W]:de}[e];if(!r)throw new Error(`Failed to find renderer for element "${e}"!`);return r}async function A(){j();const o=w();if(o instanceof S||o instanceof H)return{error:o.error};const e=v();try{return o.renderData=await ue(),{ElementComponent:await e.component()}}catch(n){return{error:n instanceof Error?n:new Error(String(n))}}}async function ue(){const o=w(),e=te(),r=v().renderDataGenerator,s=await O({node:o,storage:e.renderDataStorage,generator:r});if(s){if(s.type==="error")throw new Error(s.message);return s.data}}const _e=p({__name:"RenderGroup",props:{node:{}},setup(o){const e=o,n=se();if(e.node instanceof P&&e.node.hasChildren()){const r={};for(const s of e.node.children)s instanceof L&&(s.parseData=n(s.parseData,r))}return(r,s)=>(a(!0),d(U,null,q(r.node.children??[],c=>(a(),i(Fe,{node:c},null,8,["node"]))),256))}}),D=p({__name:"BlockFloat",props:{position:{}},setup(o){return(e,n)=>(a(),d("div",{class:y({"bitran-blockFloat":!0,[`bitran-blockFloat--${e.position}`]:!0})},null,2))}}),pe={};function me(o,e){return a(),i(J,{name:"bitran-transition--fade"},{default:h(()=>[z(o.$slots,"default")]),_:3})}const fe=$(pe,[["render",me]]),ve={class:"bitran-blockAside"},he={class:"bitran-blockAsideInner"},ke=["innerHTML"],be=p({__name:"BlockAside",props:{node:{},hovered:{type:Boolean},error:{}},async setup(o){let e,n;const r=v(),s=([e,n]=b(()=>x(r)),e=await e,n(),e);return(c,l)=>(a(),d("div",ve,[E("div",he,[k(fe,null,{default:h(()=>[c.hovered||c.error?(a(),d("div",{key:0,class:"bitran-blockAsideIcon",innerHTML:t(s)},null,8,ke)):I("",!0)]),_:1})])]))}}),ye=["id"],Ee={key:1,class:"bitran-block"},ge={class:"bitran-blockMain"},$e={key:0},we=p({__name:"Block",props:{node:{}},async setup(o){let e,n;const r=o,s=v(),c=Q("block"),l=M(!1),m=(()=>{if(!(r.node instanceof S))return""+r.node.id})(),{ElementComponent:f,error:u}=([e,n]=b(()=>A()),e=await e,n(),e);return T(()=>{c.value.addEventListener("mouseenter",()=>{l.value=!0}),c.value.addEventListener("mouseleave",()=>{l.value=!1})}),(_,g)=>(a(),d("div",{ref:"block",id:t(m),class:y({"bitran-blockContainer":!0,"bitran-blockContainer--hover":l.value,"bitran-error":t(u)})},[k(D,{position:"above"}),t(s).customLayout&&!t(u)?(a(),i(t(f),{key:0,node:_.node},null,8,["node"])):(a(),d("div",Ee,[k(be,{node:_.node,hovered:l.value,error:t(u)},null,8,["node","hovered","error"]),E("div",ge,[t(u)?(a(),d("div",$e,F(t(u)),1)):(a(),i(t(f),{key:1,node:_.node,class:y(_.node.meta.classes)},null,8,["node","class"]))])])),k(D,{position:"below"})],10,ye))}}),Ne={};function Re(o,e){return a(),d("div",null,"Block loading...")}const Ce=$(Ne,[["render",Re]]),Be={key:0,class:y({"bitran-inliner":!0,"bitran-error":!0})},De=["innerHTML"],Se=p({__name:"Inliner",props:{node:{}},async setup(o){let e,n;const{ElementComponent:r,error:s}=([e,n]=b(()=>A()),e=await e,n(),e),c=v(),l=([e,n]=b(()=>x(c)),e=await e,n(),e);return(m,f)=>t(s)?(a(),d("span",Be,[E("span",{class:"bitran-inlinerErrorIcon",innerHTML:t(l)},null,8,De),E("span",null,F(t(s)),1)])):(a(),i(t(r),{key:1,node:m.node},null,8,["node"]))}}),Le={};function Ie(o,e){return a(),d("span",null,"Inliner loading...")}const Me=$(Le,[["render",Ie]]),Te=p({__name:"RenderElement",props:{node:{}},async setup(o){let e,n;const r=o,s=r.node instanceof K,c=ae(),l=ce(),m=ie(),f=v(),u=m.value?"client":r.node instanceof X||r.node instanceof L||f.ssr?"hybrid":"client",_=B=>Y(B,{node:r.node}),g=_(s?we:Se),V=_(s?Ce:Me);let N=!0;const R=f.canRender;!m.value&&R&&(N=([e,n]=b(()=>R({isDev:c.isDev,isProd:c.isDev===void 0?void 0:!c.isDev,isServer:c.isServer,isClient:c.isServer===void 0?void 0:!c.isServer,node:r.node})),e=await e,n(),e));const C=M(!1);return T(()=>setTimeout(()=>C.value=!0,500)),(B,xe)=>t(N)?(a(),i(t(l),{key:0,mode:t(u)},{default:h(()=>[t(u)==="hybrid"?(a(),i(t(g),{key:0})):(a(),i(Z,{key:1},{fallback:h(()=>[C.value?(a(),i(t(V),{key:0})):(a(),i(ee(s?"div":"span"),{key:1}))]),default:h(()=>[k(t(g))]),_:1}))]),_:1},8,["mode"])):I("",!0)}}),Fe=p({__name:"Render",props:{node:{}},setup(o){const e=o,n=(()=>{switch(!0){case e.node instanceof re:return _e;case e.node instanceof ne:return Te;default:throw new Error(`Unsupported node "${e.node.constructor.name}"!`)}})();return(r,s)=>(a(),i(t(n),{node:r.node},null,8,["node"]))}});export{Fe as _,v as u};
