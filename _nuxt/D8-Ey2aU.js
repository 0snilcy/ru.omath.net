var ae=Object.defineProperty;var re=(a,e,t)=>e in a?ae(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var G=(a,e,t)=>re(a,typeof e!="symbol"?e+"":e,t);import{A as z,B as I,q as v,o as r,s as q,I as ie,J as u,t as R,E as l,G as M,U as E,v as g,y as W,a6 as Y,a0 as Z,_ as j,r as w,a2 as ce,c as _,x as P,aS as ue,b6 as pe,a as me,Q as K,aa as O,F as $,b7 as ve,b8 as de,ab as he,K as fe}from"./Byy7DssC.js";import{a as ee,h as ge}from"./CYtLaobC.js";import"./0G87Z3fP.js";import{u as te}from"./z5wJuavL.js";import{u as _e,a as we}from"./D5YVFFb9.js";import{P as be}from"./BDdpG9ko.js";import{_ as ye}from"./BmtBwevS.js";import{E as J}from"./CNTkzCOm.js";const Ce={easy:{color:"light-dark( #73af00, #79b800)"},medium:{color:"light-dark( #db9c00, #ffc01e)"},hard:{color:"light-dark( #dc2f51, #ff375f)"}},$e=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\r
    <path d="M6.125 12.15q.65-1.65 1.563-3.175T9.75 6.1l-1.3-.275q-.5-.1-.975.05t-.825.5L3.5 9.525q-.375.375-.288.9t.588.725zm14.7-9.75q-2.65-.125-5.037 1.025T11.525 6.45q-1.2 1.2-2.113 2.6T7.826 12q-.125.325-.125.663t.25.587l3.125 3.125q.25.25.588.25t.662-.125q1.55-.675 2.95-1.588t2.6-2.112q1.875-1.875 3.025-4.262T21.925 3.5q0-.2-.1-.4t-.25-.35t-.35-.25t-.4-.1m-6.35 7.45q-.575-.575-.575-1.412t.575-1.413t1.413-.575t1.412.575t.575 1.413T17.3 9.85t-1.412.575t-1.413-.575m-2.3 8.35l1 2.325q.2.5.725.6t.9-.275l3.15-3.15q.35-.35.5-.837t.05-.988l-.25-1.3q-1.375 1.15-2.887 2.063T12.175 18.2M4.05 16.05q.875-.875 2.125-.888t2.125.863t.875 2.125t-.875 2.125q-1.2 1.2-2.838 1.425t-3.287.45q.225-1.65.463-3.287T4.05 16.05"/>\r
</svg>`,qe=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">\r
    <path d="M12.67 13.67c-.47.46-1.04.83-1.67 1.06V23H8v-2H5v-3h3v-3.28c-1.74-.62-3-2.26-3-4.22C5 8 7 6 9.5 6h.1c-.47.95-.68 2-.57 3.08c-.59.2-1.03.76-1.03 1.42c0 .83.67 1.5 1.5 1.5c.23 0 .45-.06.65-.15c.64.84 1.52 1.47 2.52 1.82m8.06 5.77l-2.76 1.16l-.78-1.84l-2.76 1.17l-1.17-2.77L16.03 16l-1.27-3c-1.85.08-3.65-.95-4.41-2.75c-.96-2.29.12-4.93 2.41-5.9c.24-.1.5-.17.74-.23C12.84 2.87 11.5 2 10 2C7.79 2 6 3.79 6 6v.24c-.3.26-.6.58-.85.91C5.06 6.78 5 6.4 5 6c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.42-.6 2.67-1.55 3.57c.42.43 1.05.56 1.63.31c.77-.32 1.12-1.2.8-1.96a1 1 0 0 0-.14-.26C15.9 7.13 16 6.58 16 6c0-.63-.1-1.24-.28-1.81c1.28.36 2.38 1.25 2.93 2.57c.76 1.8.24 3.81-1.15 5.05zM13 8.6c.37-.41.65-.89.82-1.42c-.54.27-.85.82-.82 1.42"/>\r
</svg>`,Me=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256">\r
    <path d="M174.63 81.37a80 80 0 1 0-93.26 93.26a80 80 0 1 0 93.26-93.26M32 96a64 64 0 0 1 126-16a80.08 80.08 0 0 0-77.95 78A64.11 64.11 0 0 1 32 96m128 128a64.11 64.11 0 0 1-62-48a80.08 80.08 0 0 0 78-78a64 64 0 0 1-16 126"/>\r
</svg>`,Ie='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g fill="none" fill-rule="evenodd"><path d="m12.593 23.258l-.011.002l-.071.035l-.02.004l-.014-.004l-.071-.035q-.016-.005-.024.005l-.004.01l-.017.428l.005.02l.01.013l.104.074l.015.004l.012-.004l.104-.074l.012-.016l.004-.017l-.017-.427q-.004-.016-.017-.018m.265-.113l-.013.002l-.185.093l-.01.01l-.003.011l.018.43l.005.012l.008.007l.201.093q.019.005.029-.008l.004-.014l-.034-.614q-.005-.018-.02-.022m-.715.002a.02.02 0 0 0-.027.006l-.006.014l-.034.614q.001.018.017.024l.015-.002l.201-.093l.01-.008l.004-.011l.017-.43l-.003-.012l-.01-.01z"/><path fill="currentColor" d="M17 3a2 2 0 0 1 1.492.668l.108.132l3.704 4.939a2 2 0 0 1-.012 2.416l-.108.13l-9.259 10.184a1.25 1.25 0 0 1-1.753.096l-.097-.096l-9.259-10.185a2 2 0 0 1-.215-2.407l.095-.138L5.4 3.8a2 2 0 0 1 1.43-.793L7 3zm-2.477 8H9.477L12 17.307zm5.217 0h-3.063l-2.406 6.015zM7.323 11H4.261l5.468 6.015zm5.059-6h-.764l-2 4h4.764zM17 5h-2.382l2 4H20zM9.382 5H7L4 9h3.382z"/></g></svg>',Pe={applied:{icon:$e},method:{icon:qe},inter:{icon:Me},pretty:{icon:Ie}},ze=["title"],Ae=["title"],Te=z({__name:"ProblemContainer",props:{node:{},info:{}},async setup(a){let e,t;const s=ee(),c=([e,t]=I(()=>te()),e=await e,t(),e);return(o,m)=>{var h;const b=Y;return r(),v("div",{class:u(o.$style.problemContainer)},[q("div",{class:u(o.$style.info)},[q("div",{class:u(o.$style.top)},[q("h2",{class:u(o.$style.title)},R(l(s)(o.info.title)),3),q("div",{class:u(o.$style.asideSection)},[(r(!0),v(M,null,E((h=o.info.attributes)==null?void 0:h.sort(),i=>(r(),v("div",{class:u(o.$style.attribute),title:l(c)(`attribute_explain.${i}`)},[g(b,{name:"attribute-icon",wrapper:"span",svg:l(Pe)[i].icon},null,8,["svg"]),W(" "+R(l(c)(`attribute.${i}`)),1)],10,ze))),256)),q("div",{class:u(o.$style.level),title:l(c)("level_hint"),style:Z({"--levelColor":l(Ce)[o.info.level].color})},R(l(s)(l(c)(`level.${o.info.level}`))),15,Ae)],2)],2)],2),ie(o.$slots,"default")],2)}}}),ke="_problemContainer_10n05_1",Se="_info_10n05_16",Be="_top_10n05_20",Re="_title_10n05_34",Ee="_asideSection_10n05_40",je="_level_10n05_53",Ve="_attribute_10n05_65",xe={problemContainer:ke,info:Se,top:Be,title:Re,asideSection:Ee,level:je,attribute:Ve},Fe={$style:xe},Mt=j(Te,[["__cssModules",Fe]]),Le=z({__name:"ProblemAction",props:{active:{type:Boolean},icon:{},label:{}},setup(a){return(e,t)=>{const s=Y;return r(),v("button",{class:u({[e.$style.problemAction]:!0,[e.$style.active]:e.active})},[g(s,{name:"problem-action-icon",wrapper:"span",svg:e.icon},null,8,["svg"]),W(" "+R(e.label),1)],2)}}}),Ne="_problemAction_1e24x_1",He="_active_1e24x_19",Ue={problemAction:Ne,active:He},De={$style:Ue},Q=j(Le,[["__cssModules",De]]),Ge=z({__name:"ProblemContentItem",props:{node:{},contentItem:{},generatedResult:{}},async setup(a){let e,t;const s=a,c=ge(),o=w(0),m=w(!1),b=w(!1);ce(()=>s.generatedResult,i=>h(i)),[e,t]=I(()=>h(s.generatedResult)),await e,t();async function h(i){if(i){if(m.value){b.value=!0;return}m.value=!0;try{const y=s.contentItem.source.replace(/\{\{\s*([^}]+)\s*\}\}/g,(A,T)=>{const k=T.trim(),f=i[k];return f===void 0?A:String(f)}),V=await c.transpiler.parser.parseBlocks(y);b.value?(b.value=!1,m.value=!1,h(i)):(s.contentItem.blocks.setNodes(V),o.value++,m.value=!1)}catch(y){throw m.value=!1,y}}}return(i,y)=>(r(),v("div",{class:u(i.$style.problemContentItem)},[(r(),_(ue,{suspensible:""},{default:P(()=>[(r(),_(l(ye),{key:o.value,node:i.contentItem.blocks},null,8,["node"]))]),_:1}))],2))}}),Ke="_problemContentItem_5ivkp_1",Oe={problemContentItem:Ke},Je={$style:Oe},Qe=j(Ge,[["__cssModules",Je]]),Xe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="1 1 22 22">    <path d="M12 6a6 6 0 0 1 6 6c0 2.22-1.21 4.16-3 5.2V19a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-1.8c-1.79-1.04-3-2.98-3-5.2a6 6 0 0 1 6-6m2 15v1a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-1zm6-10h3v2h-3zM1 11h3v2H1zM13 1v3h-2V1zM4.92 3.5l2.13 2.14l-1.42 1.41L3.5 4.93zm12.03 2.13l2.12-2.13l1.43 1.43l-2.13 2.12z"></path></svg>',We=`<svg version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 560">\r
    <path  d="m67.1 532q-15.4 0-25.7-10.4-10.4-10.3-10.4-25.7 0-15.3 10.4-25.7 10.3-10.3 25.7-10.3h288.5q15.4 0 25.7 10.3 10.4 10.4 10.4 25.7 0 15.4-10.4 25.7-10.3 10.4-25.7 10.4zm0-144.3q-15.3 0-25.7-10.4-10.3-10.3-10.3-25.7 0-15.3 10.3-25.7 10.4-10.3 25.7-10.3h505q15.4 0 25.7 10.3 10.4 10.4 10.4 25.7 0 15.4-10.4 25.7-10.3 10.4-25.7 10.4zm0-144.3q-15.3 0-25.7-10.3-10.3-10.4-10.3-25.7 0-15.4 10.3-25.7 10.4-10.4 25.7-10.4h505q15.4 0 25.7 10.4 10.4 10.3 10.4 25.7 0 15.3-10.4 25.7-10.3 10.3-25.7 10.3zm0-144.3q-15.3 0-25.7-10.3-10.3-10.4-10.3-25.7 0-15.4 10.3-25.7 10.4-10.4 25.7-10.4h505q15.4 0 25.7 10.4 10.4 10.3 10.4 25.7 0 15.3-10.4 25.7-10.3 10.3-25.7 10.3z"/>\r
</svg>`,Ye=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="2 2 20 20">\r
    <path d="m10.6 16.6l7.05-7.05l-1.4-1.4l-5.65 5.65l-2.85-2.85l-1.4 1.4zM12 22q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"></path>\r
</svg>`,Ze='<svg xmlns="http://www.w3.org/2000/svg" viewBox="1 1 16.97 16.97"><!-- Icon from HeroIcons by Refactoring UI Inc - https://github.com/tailwindlabs/heroicons/blob/master/LICENSE --><path fill="currentColor" d="M12 4.467c0-.405.262-.75.559-1.027c.276-.257.441-.584.441-.94c0-.828-.895-1.5-2-1.5s-2 .672-2 1.5c0 .362.171.694.456.953c.29.265.544.6.544.994a.97.97 0 0 1-1.024.974a40 40 0 0 1-3.014-.306a.75.75 0 0 0-.847.847q.21 1.49.306 3.014A.97.97 0 0 1 4.447 10c-.393 0-.729-.253-.994-.544C3.194 9.17 2.862 9 2.5 9C1.672 9 1 9.895 1 11s.672 2 1.5 2c.356 0 .683-.165.94-.441c.276-.297.622-.559 1.027-.559a.997.997 0 0 1 1.004 1.03a40 40 0 0 1-.319 3.734a.75.75 0 0 0 .64.842q1.575.219 3.184.318A.97.97 0 0 0 10 16.948c0-.394-.254-.73-.545-.995C9.171 15.693 9 15.362 9 15c0-.828.895-1.5 2-1.5s2 .672 2 1.5c0 .356-.165.683-.441.94c-.297.276-.559.622-.559 1.027a1 1 0 0 0 1.03 1.005q2.007-.075 3.961-.337a.75.75 0 0 0 .644-.644q.263-1.954.337-3.961A1 1 0 0 0 16.967 12c-.405 0-.75.262-1.027.559c-.257.276-.584.441-.94.441c-.828 0-1.5-.895-1.5-2s.672-2 1.5-2c.362 0 .694.17.953.455c.265.291.601.545.995.545a.97.97 0 0 0 .976-1.024a41 41 0 0 0-.318-3.184a.75.75 0 0 0-.842-.64q-1.842.247-3.734.319A.997.997 0 0 1 12 4.467"></path></svg>',et='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="m0 0v2h2.8l-0.5 0.4q-1.2 1.2-1.7 2.6-0.6 1.4-0.6 2.9 0 2.8 1.7 5 1.6 2.1 4.3 2.9v-2.1q-1.8-0.7-2.9-2.3-1.1-1.5-1.1-3.5 0-1.1 0.4-2.1 0.4-1.1 1.4-2l0.2-0.2v2.4h2v-6zm10 0.3v2.1q1.8 0.6 2.9 2.2 1.1 1.5 1.1 3.5 0 1.1-0.4 2.1-0.5 1.1-1.3 2l-0.3 0.2v-2.4h-2v6h6v-2h-2.7l0.3-0.3q1.3-1.3 1.8-2.7 0.6-1.5 0.6-2.9 0-2.8-1.7-5-1.6-2.2-4.3-2.9z"/></svg>',X={hint:{icon:Xe},solution:{icon:We},answer:{icon:Ye},note:{icon:Ze},generate:{icon:et}};function tt(a){if(typeof a=="number")return a;let e=0;for(let t=0;t<a.length;t++)e=(e<<5)-e+a.charCodeAt(t),e|=0;return e}function nt(a){return function(){a|=0,a=a+2654435769|0;let e=a^a>>>16;return e=Math.imul(e,569420461),e=e^e>>>15,e=Math.imul(e,1935289751),(e=e^e>>>15)>>>0}}class ot{constructor(e){G(this,"_rng");const t=tt(e);this._rng=nt(t)}rng(){return this._rng()}boolean(){return this.rng()%2===0}integer(e,t){const s=t-e+1;return this.rng()%s+e}float(e,t,s){const c=t-e,o=this.rng()/4294967295*c+e;return parseFloat(o.toFixed(s))}shuffle(e){const t=[...e];for(let s=t.length-1;s>0;s--){const c=this.rng()%(s+1);[t[s],t[c]]=[t[c],t[s]]}return t}arrayElement(e){if(e.length===0)return;const t=this.rng()%e.length;return e[t]}arrayElements(e,t,s=!0){if(e.length===0)return[];const c=[];if(s){const o=this.shuffle(e);for(let m=0;m<t&&m<o.length;m++)c.push(o[m])}else for(let o=0;o<t;o++){const m=this.rng()%e.length;c.push(e[m])}return c}}const st=["title"],lt=z({__name:"ProblemContent",props:{node:{},content:{},generatorContentPath:{}},async setup(a){let e,t;pe(n=>({"22411ec8":V.value}));const s=a,c=ee(),o=([e,t]=I(()=>te()),e=await e,t(),e),m=["hint","solution","answer","note"],b={hint:"hints",solution:"solution",answer:"answer",note:"note"},h=m.filter(n=>b[n]in s.content),i=w(),y=w(0),V=me(()=>`${y.value}deg`),A=K(),T=K(),k=!!s.generatorContentPath,f=w(),x=w(!0);async function N(){y.value+=180,x.value?x.value=!1:f.value=String(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER));const n=new ot(f.value),d=await A.value.generator(n);T.value=d}if(k)try{let n=function(U){if(typeof window<"u"&&window.btoa)return window.btoa(Array.from(U,D=>{const L=D.charCodeAt(0);return L<128?D:String.fromCharCode(192|L>>6,128|L&63)}).join(""));if(typeof Buffer<"u")return Buffer.from(U,"utf-8").toString("base64");throw new Error("No base64 encoder available!")};const d=`/api/problem/generator/${s.generatorContentPath}.js`,F=([e,t]=I(()=>$fetch(d,{responseType:"text"})),e=await e,t(),e),B=`data:text/javascript;base64,${n(F)}`,H=([e,t]=I(()=>import(B)),e=await e,t(),e).default;A.value=H,f.value=H.defaultSeed,[e,t]=I(()=>N()),await e,t()}catch(n){console.error(`Error loading problem generator module for path: ${s.generatorContentPath}`,n)}function ne(){x.value=!0}const S=w(!1),oe=O("seedReference"),se=O("seedPopup"),{floatingStyles:le}=_e(oe,se,{whileElementsMounted:we,placement:"top"}),C=z({name:"ContentItem",props:{item:{type:Object,required:!0}},setup(n){return()=>fe(Qe,{node:s.node,contentItem:n.item,generatedResult:T.value})}});return(n,d)=>{const F=he;return r(),v("div",{class:u(n.$style.problemContent)},[g(l(C),{item:n.content.description,class:u(n.$style.description)},null,8,["item","class"]),l(h).length>0?(r(),v("div",{key:0,class:u(n.$style.actions)},[(r(!0),v(M,null,E(l(h),p=>(r(),_(Q,{icon:l(X)[p].icon,label:l(o)(`action_${p}`),active:i.value===p,onClick:B=>i.value=i.value===p?void 0:p},null,8,["icon","label","active","onClick"]))),256)),l(k)?(r(),v("div",{key:0,ref:"seedReference",onTouchstart:d[1]||(d[1]=p=>S.value=!0),onMouseenter:d[2]||(d[2]=p=>S.value=!0),onMouseleave:d[3]||(d[3]=p=>S.value=!1)},[g(Q,{icon:l(X).generate.icon,label:l(o)("action_generate"),active:!1,onClick:N,class:u(n.$style.generateAction)},null,8,["icon","label","class"]),g(F,null,{default:P(()=>[S.value?(r(),v("div",{key:0,ref:"seedPopup",class:u(n.$style.seedPopup),style:Z(l(le))},[ve(q("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=p=>f.value=p),onInput:ne,title:l(o)("seed_explain")},null,40,st),[[de,f.value]])],6)):$("",!0)]),_:1})],544)):$("",!0)],2)):$("",!0),g(be,{paneKey:i.value||Symbol()},{default:P(()=>[i.value?(r(),v("div",{key:0,class:u(n.$style.activeActionPane)},[["answer","note"].includes(i.value)?(r(),_(l(C),{key:0,item:n.content[i.value]},null,8,["item"])):i.value==="hint"?(r(),v(M,{key:1},[n.content.hints.length===1?(r(),_(l(C),{key:0,item:n.content.hints[0]},null,8,["item"])):(r(!0),v(M,{key:1},E(n.content.hints,(p,B)=>(r(),_(J,{class:u(n.$style.expander),label:`${l(o)("action_hint")} ${B+1}`},{default:P(()=>[g(l(C),{item:p},null,8,["item"])]),_:2},1032,["class","label"]))),256))],64)):i.value==="solution"?(r(),v(M,{key:2},[""in n.content.solution?(r(),_(l(C),{key:0,item:n.content.solution[""]},null,8,["item"])):$("",!0),(r(!0),v(M,null,E(Object.keys(n.content.solution).slice(""in n.content.solution?1:0),p=>(r(),_(J,{class:u(n.$style.expander),label:l(c)(p)},{default:P(()=>[g(l(C),{item:n.content.solution[p]},null,8,["item"])]),_:2},1032,["class","label"]))),256))],64)):$("",!0)],2)):$("",!0)]),_:1},8,["paneKey"])],2)}}}),at="_problemContent_13i7j_1",rt="_description_13i7j_1",it="_actions_13i7j_4",ct="_generateAction_13i7j_16",ut="_activeActionPane_13i7j_21",pt="_expander_13i7j_24",mt="_seedPopup_13i7j_33",vt={problemContent:at,description:rt,actions:it,generateAction:ct,activeActionPane:ut,expander:pt,seedPopup:mt},dt={$style:vt},It=j(lt,[["__cssModules",dt]]);export{It as P,Mt as a};
