const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./katex.CEY6f2P4.css","./BtAE8quX.js","./1T0ow2cI.js","./entry.m3x4K7pa.css"])))=>i.map(i=>d[i]);
import{A as W,aa as N,r as i,al as B,ae as F,R as H,c as q,o as w,x as z,q as $,s as x,J as E,y as K,t as J,v as U,am as j,E as G,n as l,_ as Q}from"./1T0ow2cI.js";import"./CvVpBOh-.js";import{u as X}from"./Bcigwdxm.js";import{F as Y}from"./CzXlo5Wm.js";import{u as Z}from"./scgI3Hik.js";import"./CqIBaGNl.js";import"./CTODjf_A.js";import"./IvoCX9P_.js";const ee=W({__name:"Diagram",props:{node:{}},setup(ne){const L=X(),p=L.content,s=N("diagram"),_=i(p),{lightbox:f,initLightbox:D,registerCaption:P}=Z(),v=i(null),b=i(!1),g=i(null),h=i(!1),y=i(null),u=i(!1),S="__mermaid__"+B(),c={display:/\$\$(.*?)\$\$/gs,inline:new RegExp("\\$(?!\\$)(.*?)(?<!\\$)\\$","gs")};function k(e){return c.display.test(e)||c.inline.test(e)}const T=e=>new Promise(t=>setTimeout(t,e));async function M(){if(!y.value||u.value)return;await l(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),(await l(()=>import("./ChWnQ-fc.js"),[],import.meta.url)).default.render("\\sum_{i=1}^n i^2 = \\frac{n(n+1)(2n+1)}{6}",y.value,{displayMode:!0}),await T(200),u.value=!0}async function V(e){if(!k(e))return e;await l(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const t=await l(()=>import("./ChWnQ-fc.js"),[],import.meta.url);u.value||await M();const r=(n,d,m)=>n.replace(d,(le,O)=>t.default.renderToString(O,{displayMode:m}));let a=e;return a=r(a,c.display,!0),a=r(a,c.inline,!1),a}function A(e,t){const r=["--text","--textLabel","--bgNode","--bgLabel","--border","--filled","--link"],a=getComputedStyle(e);let n="";r.forEach(d=>{const m=a.getPropertyValue(d).trim();m&&(n+=`${d}: ${m}; `)}),t.setAttribute("style",n)}function I(e){const t=Math.min(1e3,.9*window.innerWidth),r=e.clientHeight/e.clientWidth,a=e.cloneNode(!0);a.removeAttribute("width"),A(e,a),D({dataSource:[{html:a.outerHTML,width:t,height:t*r}]}),v.value&&P(f.value,v.value)}function R(){if(!f.value){const e=s.value.querySelector("svg");I(e)}f.value.loadAndOpen(0)}async function C(){if(s.value)try{h.value=!1,g.value=null,k(p)&&!u.value&&await M();const e=(await l(async()=>{const{default:a}=await import("./BtAE8quX.js").then(n=>n.bz);return{default:a}},__vite__mapDeps([1,2,3]),import.meta.url)).default;e.initialize({startOnLoad:!1,securityLevel:"loose",markdownAutoWrap:!1,flowchart:{useMaxWidth:!0,padding:10,wrappingWidth:400},theme:"base"}),_.value=await V(p),await e.parse(_.value,{suppressErrors:!1});const{svg:t}=await e.render(S,_.value,s.value);s.value.innerHTML=t;const r=s.value.querySelector("svg");r==null||r.addEventListener("click",R)}catch(e){h.value=!0,g.value=e instanceof Error?e.message:String(e)}}let o=null;return F(()=>{o=new IntersectionObserver(e=>{e[0].isIntersecting&&(b.value=!0,C(),o==null||o.disconnect(),o=null)},{threshold:.1}),s.value&&o.observe(s.value)}),H(()=>{o&&(o.disconnect(),o=null)}),(e,t)=>{const r=j;return w(),q(Y,{caption:G(L).caption,onCaptionMounted:t[0]||(t[0]=a=>v.value=a)},{default:z(()=>[h.value?(w(),$("div",{key:0,class:E(e.$style.error)},[x("div",{class:E(e.$style.errorMessage)},[t[1]||(t[1]=x("span",null,"Diagram Error:",-1)),K(" "+J(g.value),1)],2)],2)):(w(),$("div",{key:1,ref:"diagram",class:E([e.$style.diagram,!b.value&&e.$style.placeholder])},[U(r)],2)),x("div",{ref_key:"katexPreloadEl",ref:y,style:{position:"absolute",visibility:"hidden",height:"0",width:"0",overflow:"hidden"}},null,512)]),_:1},8,["caption"])}}}),te="_diagram_1hg8c_1",ae="_placeholder_1hg8c_7",re="_error_1hg8c_29",oe="_errorMessage_1hg8c_40",se={diagram:te,placeholder:ae,error:re,errorMessage:oe},ie={$style:se},ge=Q(ee,[["__cssModules",ie]]);export{ge as default};
