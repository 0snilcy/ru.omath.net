const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./katex.CEY6f2P4.css","./BGujTQVI.js","./ma-yzDba.js","./entry.E0yL-eVk.css"])))=>i.map(i=>d[i]);
import{A as W,af as H,$ as n,al as N,aj as B,R as F,c as q,o as w,x as z,q as k,r as E,I as x,y as K,s as j,v as U,am as G,E as J,n as l,_ as Q}from"./ma-yzDba.js";import"./DiOTqd5X.js";import{u as X}from"./DyZc2_AK.js";import{F as Y}from"./D7AKKRwi.js";import{u as Z}from"./C8BvjVKf.js";import"./Bcd_QwTy.js";import"./D-MePJoR.js";import"./RGhjTnN3.js";const ee=W({__name:"Diagram",props:{node:{}},setup(ne){const L=X(),m=L.content,i=H("diagram"),_=n(m),{lightbox:f,initLightbox:T,registerCaption:A}=Z(),v=n(null),b=n(!1),g=n(null),h=n(!1),y=n(null),u=n(!1),D="__mermaid__"+N(),c={display:/\$\$(.*?)\$\$/gs,inline:new RegExp("\\$(?!\\$)(.*?)(?<!\\$)\\$","gs")};function M(e){return c.display.test(e)||c.inline.test(e)}const P=e=>new Promise(t=>setTimeout(t,e));async function $(){if(!y.value||u.value)return;await l(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),(await l(()=>import("./ChWnQ-fc.js"),[],import.meta.url)).default.render("\\sum_{i=1}^n i^2 = \\frac{n(n+1)(2n+1)}{6}",y.value,{displayMode:!0}),await P(200),u.value=!0}async function I(e){if(!M(e))return e;await l(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const t=await l(()=>import("./ChWnQ-fc.js"),[],import.meta.url);u.value||await $();const r=(o,d,p)=>o.replace(d,(le,O)=>t.default.renderToString(O,{displayMode:p}));let a=e;return a=r(a,c.display,!0),a=r(a,c.inline,!1),a}function S(e,t){const r=["--text","--textLabel","--bgNode","--bgLabel","--border","--filled","--link"],a=getComputedStyle(e);let o="";r.forEach(d=>{const p=a.getPropertyValue(d).trim();p&&(o+=`${d}: ${p}; `)}),t.setAttribute("style",o)}function V(e){const t=Math.min(1e3,.9*window.innerWidth),r=e.clientHeight/e.clientWidth,a=e.cloneNode(!0);a.removeAttribute("width"),S(e,a);const o=document.createElement("div");o.className="pswp__img-overlay-wrapper",o.setAttribute("style","position: relative;"),o.innerHTML=`
        <div class="pswp__img" style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;"></div>
        ${a.outerHTML}
    `,T({dataSource:[{html:o.outerHTML,width:t,height:t*r}]}),v.value&&A(f.value,v.value)}function R(){if(!f.value){const e=i.value.querySelector("svg");V(e)}f.value.loadAndOpen(0)}async function C(){if(i.value)try{h.value=!1,g.value=null,M(m)&&!u.value&&await $();const e=(await l(async()=>{const{default:a}=await import("./BGujTQVI.js").then(o=>o.bA);return{default:a}},__vite__mapDeps([1,2,3]),import.meta.url)).default;e.initialize({startOnLoad:!1,securityLevel:"loose",markdownAutoWrap:!1,flowchart:{useMaxWidth:!0,padding:10,wrappingWidth:400},theme:"base"}),_.value=await I(m),await e.parse(_.value,{suppressErrors:!1});const{svg:t}=await e.render(D,_.value,i.value);i.value.innerHTML=t;const r=i.value.querySelector("svg");r==null||r.addEventListener("click",R)}catch(e){h.value=!0,g.value=e instanceof Error?e.message:String(e)}}let s=null;return B(()=>{s=new IntersectionObserver(e=>{e[0].isIntersecting&&(b.value=!0,C(),s==null||s.disconnect(),s=null)},{threshold:.1}),i.value&&s.observe(i.value)}),F(()=>{s&&(s.disconnect(),s=null)}),(e,t)=>{const r=G;return w(),q(Y,{caption:J(L).caption,onCaptionMounted:t[0]||(t[0]=a=>v.value=a)},{default:z(()=>[h.value?(w(),k("div",{key:0,class:x(e.$style.error)},[E("div",{class:x(e.$style.errorMessage)},[t[1]||(t[1]=E("span",null,"Diagram Error:",-1)),K(" "+j(g.value),1)],2)],2)):(w(),k("div",{key:1,ref:"diagram",class:x([e.$style.diagram,!b.value&&e.$style.placeholder])},[U(r)],2)),E("div",{ref_key:"katexPreloadEl",ref:y,style:{position:"absolute",visibility:"hidden",height:"0",width:"0",overflow:"hidden"}},null,512)]),_:1},8,["caption"])}}}),te="_diagram_1hg8c_1",ae="_placeholder_1hg8c_7",re="_error_1hg8c_29",oe="_errorMessage_1hg8c_40",se={diagram:te,placeholder:ae,error:re,errorMessage:oe},ie={$style:se},ge=Q(ee,[["__cssModules",ie]]);export{ge as default};
