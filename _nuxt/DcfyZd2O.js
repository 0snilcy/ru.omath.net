import{x as I,c as f,o as c,E as d,a as T,B as _,$ as W,a0 as X,_ as P,F as B,N as L,b as k,w as U,d as R,Z as S,v as C,ad as K,f as w,az as N,Y as G,y as Y,a1 as A,r as F,a4 as j,a2 as x,C as O,D as ee,z as Z,g as J,e as te,ak as ne,aA as Q,al as z,aB as se,aC as oe,aD as ae,A as ie,aE as V,u as re,a6 as ce,aF as le,aG as q,aH as pe,s as E,ax as ue}from"./CYerhEto.js";import{u as de}from"./BS-l_r5q.js";import{u as _e,a as me,s as fe,b as ve}from"./L6Bb2ZxU.js";const ge=["src"],ye=I({__name:"ContentDecoration",props:{decoration:{}},setup(i){const e=W();return(s,o)=>(c(),f("div",{class:d(s.$style.contentDecoration)},[T("img",{src:_(e)(("contentAsset"in s?s.contentAsset:_(X))(s.decoration))},null,8,ge)],2))}}),$e="_contentDecoration_1catu_1",be={contentDecoration:$e},he={$style:be},nt=Object.assign(P(ye,[["__cssModules",he]]),{__name:"MainUtilsContentDecoration"}),we=I({__name:"Breadcrumb",props:{context:{}},setup(i){const e=K({prefetch:!1});function s(o){return o}return(o,a)=>{const u=S;return c(),f("section",{class:d(o.$style.breadcrumb)},[(c(!0),f(B,null,L(o.context.slice(0,-1).filter(l=>!l.hidden),l=>(c(),f(B,null,[k(_(e),{to:l.href,class:d(o.$style.breadcrumbItem)},{default:U(()=>[k(u,{name:l.icon,wrapper:"span"},null,8,["name"]),R(" "+C(l.title),1)]),_:2},1032,["to","class"]),k(u,{class:d(o.$style.sep),name:"angle-right"},null,8,["class"])],64))),256))],2)}}}),Me="_breadcrumb_1e1w1_1",Ce="_breadcrumbItem_1e1w1_19",Te="_sep_1e1w1_34",ke={breadcrumb:Me,breadcrumbItem:Ce,sep:Te},Ie={$style:ke},st=Object.assign(P(we,[["__cssModules",Ie]]),{__name:"MainUtilsBreadcrumb"}),Pe=I({__name:"ContentTitle",props:{icon:{},title:{},hint:{}},setup(i){return(e,s)=>{const o=S,a=G;return c(),f("section",{class:d(e.$style.contentTitle)},[_(N)(e.icon)?(c(),w(o,{key:0,name:e.icon,title:e.hint},null,8,["name","title"])):(c(),w(a,{key:1,name:"content-title-icon",svg:e.icon,title:e.hint},null,8,["svg","title"])),T("h1",null,C(e.title),1)],2)}}}),De="_contentTitle_p3ocd_1",Be={contentTitle:De},Ue={$style:Be},ot=Object.assign(P(Pe,[["__cssModules",Ue]]),{__name:"MainUtilsContentTitle"}),Fe=I({__name:"ContentDescription",props:{description:{}},async setup(i){let e,s;const o=([e,s]=Y(()=>de()),e=await e,s(),e);return(a,u)=>(c(),f("section",{class:d(a.$style.contentDescription)},C(_(o)(a.description)),3))}}),Oe="_contentDescription_x6dlr_1",Se={contentDescription:Oe},Ae={$style:Se},at=Object.assign(P(Fe,[["__cssModules",Ae]]),{__name:"MainUtilsContentDescription"}),je={key:2},Ee=400,Le=100,Ne=I({__name:"ContentPopover",props:{data:{}},setup(i){const e=A("reference"),s=A("popover"),o=A("popover-arrow"),{floatingStyles:a,middlewareData:u}=_e(e,s,{whileElementsMounted:me,middleware:[fe({boundary:(document==null?void 0:document.querySelector("[erudit-main]"))||void 0}),ve({element:o})]}),l=F(!1);let v,t;function y(n){clearTimeout(t),clearTimeout(v),n?l.value=!0:v=setTimeout(()=>{l.value=!0},Ee)}function b(){clearTimeout(v),t=setTimeout(()=>{l.value=!1},Le)}return(n,p)=>{const r=S,m=G,$=x;return c(),f("div",{ref:"reference",class:d(n.$style.reference),style:j(`--popoverColor: ${n.data.color}`),onMouseenter:p[0]||(p[0]=()=>y()),onMouseleave:b,onClick:p[1]||(p[1]=()=>y(!0))},[_(N)(n.data.icon)?(c(),w(r,{key:0,name:n.data.icon},null,8,["name"])):(c(),w(m,{key:1,name:"popover-icon",svg:n.data.icon},null,8,["svg"])),R(" "+C(n.data.title)+" ",1),k($,null,{default:U(()=>{var g,h;return[_(l)?(c(),f("div",{key:0,ref:"popover",class:d(n.$style.popover),style:j(_(a))},[T("div",{ref:"popover-arrow",class:d(n.$style.arrow),style:j({position:"absolute",top:((g=_(u).arrow)==null?void 0:g.y)!=null?`${_(u).arrow.y}px`:"",left:((h=_(u).arrow)==null?void 0:h.x)!=null?`${_(u).arrow.x}px`:""})},null,6),T("div",{class:d(n.$style.inner)},[_(N)(n.data.icon)?(c(),w(r,{key:0,class:d(n.$style.floatIcon),name:n.data.icon},null,8,["class","name"])):(c(),w(m,{key:1,class:d(n.$style.floatIcon),name:"popover-icon",svg:n.data.icon},null,8,["class","svg"])),T("div",{class:d(n.$style.title)},C(n.data.title),3),n.data.description?(c(),f("div",je,C(n.data.description),1)):O("",!0),ee(n.$slots,"default")],2)],6)):O("",!0)]}),_:3})],38)}}}),ze="_reference_ouigi_1",Re="_popover_ouigi_21",Ve="_arrow_ouigi_31",qe="_inner_ouigi_40",He="_floatIcon_ouigi_50",Ge="_title_ouigi_56",Ye={reference:ze,popover:Re,arrow:Ve,inner:qe,floatIcon:He,title:Ge},Ze={$style:Ye},H=Object.assign(P(Ne,[["__cssModules",Ze]]),{__name:"MainUtilsContentPopover"}),Je=I({__name:"ContentPopovers",props:{generic:{}},async setup(i){let e,s;const o=i,a=([e,s]=Y(()=>Z("flag_dev","flag_dev_description","flag_advanced","flag_advanced_description","flag_secondary","flag_secondary_description","popover_dependencies","popover_dependencies_description")),e=await e,s(),e),u={dev:{icon:"construction",color:"var(--warn)",title:a.flag_dev,description:a.flag_dev_description},advanced:{icon:"asterisk",color:"#7c67ac",title:a.flag_advanced,description:a.flag_advanced_description},secondary:{icon:"puzzle",color:"#7faf35",title:a.flag_secondary,description:a.flag_secondary_description}},l={icon:"shuffle",color:"#47baa9",title:a.popover_dependencies,description:a.popover_dependencies_description},v=J(()=>{var t,y,b;return!!((t=o.generic)!=null&&t.flags&&((y=Object.keys(o.generic.flags))!=null&&y.length)||(b=o.generic)!=null&&b.dependencies)});return(t,y)=>{var p;const b=S,n=te;return _(v)?(c(),f("section",{key:0,class:d(t.$style.popovers)},[(c(!0),f(B,null,L(Object.keys(t.generic.flags),r=>(c(),w(H,{data:u[r]},null,8,["data"]))),256)),(p=t.generic)!=null&&p.dependencies?(c(),w(H,{key:0,data:l},{default:U(()=>[T("ul",{class:d(t.$style.dependenciesList)},[(c(!0),f(B,null,L(t.generic.dependencies,(r,m)=>(c(),f("li",null,[k(b,{name:"arrow-left",wrapper:"span"}),k(n,{prefetch:!1,to:m},{default:U(()=>[R(C(r),1)]),_:2},1032,["to"])]))),256))],2)]),_:1})):O("",!0)],2)):O("",!0)}}}),Qe="_popovers_1wpsg_1",We="_dependenciesList_1wpsg_8",Xe={popovers:Qe,dependenciesList:We},Ke={$style:Xe},it=Object.assign(P(Je,[["__cssModules",Ke]]),{__name:"MainUtilsContentPopovers"});function rt(){var l,v;const i=ne(),e=Q(),s="content-data",o=(v=i.static.data)[s]||(v[s]=(l=i.payload.data)[s]||(l[s]={})),a=F();let u;return z(()=>{u=(async()=>{if(!e.value){a.value=void 0;return}const t=se(e.value.contentId),y=o[t]||(o[t]=await $fetch("/api/content/data",{query:{contentId:t}}));return a.value=y,a})()}),u}function ct(i){const e=Q(),s=oe(),o=ae(),a=Z("article","summary","practice","site_info_title","seo_article_description","seo_summary_description","seo_practice_description"),u=()=>{setTimeout(()=>{const p=(()=>{var r,m,$;switch((r=e.value)==null?void 0:r.type){case"topic":const g=e.value.topicPart;return(($=(m=E.site)==null?void 0:m.favicon)==null?void 0:$[g])||ue(`favicon/${g}.svg`)}return q})();o.value=p},500)};let l,v;const t={title:F(),description:F()},y=()=>{l=(async()=>{var m,$,g,h,D;const p=await a;let r="";if(r+=(($=(m=i.value.generic)==null?void 0:m.seo)==null?void 0:$.title)||i.value.generic.title||i.value.generic.contentId.split("/").pop(),e.value.type==="topic"){const M=e.value.topicPart;M!=="article"&&(r+=` | ${p[M]}`)}if(i.value.type!=="book"){const M=(g=i.value)==null?void 0:g.bookTitle;r+=M?` | ${M}`:""}r+=" - "+(((h=E.seo)==null?void 0:h.title)||((D=E.site)==null?void 0:D.title)||p.site_info_title),t.title.value=r})()},b=()=>{v=(async()=>{var m,$,g,h,D;const p=await a,r=(($=(m=i.value.generic)==null?void 0:m.seo)==null?void 0:$.description)||((g=i.value.generic)==null?void 0:g.description);if(r){t.description.value=r.trim().replace(/\n/g," ");return}if(e.value.type==="topic"){const M=p[`seo_${e.value.topicPart}_description`];t.description.value=M(((D=(h=i.value.generic)==null?void 0:h.seo)==null?void 0:D.title)||i.value.generic.title);return}t.description.value=""})()};ie({title:t.title,ogTitle:t.title,description:t.description,ogDescription:t.description});const n=J(()=>{var p,r;return[...V(s,pe),...(p=i.value.generic)!=null&&p.ogImage?V(s,(r=i.value.generic)==null?void 0:r.ogImage):[]]});return re({meta:n}),z(()=>{y(),b()}),ce(()=>{z(()=>{u()})}),le(()=>{o.value=q}),Promise.all([l,v])}export{st as B,nt as C,ct as a,ot as b,at as c,it as d,rt as u};
