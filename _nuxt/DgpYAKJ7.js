const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./katex.CEY6f2P4.css","./DJLrHLQR.js","./B8j-voU8.js","./entry.E0yL-eVk.css"])))=>i.map(i=>d[i]);
import{z as W,ae as H,Z as i,ak as N,ai as z,Q as B,c as F,o as w,v as q,q as $,r as x,H as E,x as K,t as Q,s as U,al as Z,D as j,n as l,_ as G}from"./B8j-voU8.js";import"./cCl500a7.js";import{u as J}from"./LAlT3Xht.js";import{F as X}from"./aIVspNiu.js";import{u as Y}from"./CXHKk8Cg.js";import"./D7QIlIeF.js";import"./BihgogmZ.js";import"./CTZs3P5p.js";const ee=W({__name:"Diagram",props:{node:{}},setup(ne){const L=J(),m=L.content,s=H("diagram"),_=i(m),{lightbox:f,initLightbox:D,registerCaption:P}=Y(),v=i(null),b=i(!1),g=i(null),h=i(!1),y=i(null),u=i(!1),S="__mermaid__"+N(),c={display:/\$\$(.*?)\$\$/gs,inline:new RegExp("\\$(?!\\$)(.*?)(?<!\\$)\\$","gs")};function k(e){return c.display.test(e)||c.inline.test(e)}const T=e=>new Promise(t=>setTimeout(t,e));async function M(){if(!y.value||u.value)return;await l(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url),(await l(()=>import("./ChWnQ-fc.js"),[],import.meta.url)).default.render("\\sum_{i=1}^n i^2 = \\frac{n(n+1)(2n+1)}{6}",y.value,{displayMode:!0}),await T(200),u.value=!0}async function V(e){if(!k(e))return e;await l(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const t=await l(()=>import("./ChWnQ-fc.js"),[],import.meta.url);u.value||await M();const r=(n,d,p)=>n.replace(d,(le,O)=>t.default.renderToString(O,{displayMode:p}));let a=e;return a=r(a,c.display,!0),a=r(a,c.inline,!1),a}function I(e,t){const r=["--text","--textLabel","--bgNode","--bgLabel","--border","--filled","--link"],a=getComputedStyle(e);let n="";r.forEach(d=>{const p=a.getPropertyValue(d).trim();p&&(n+=`${d}: ${p}; `)}),t.setAttribute("style",n)}function A(e){const t=Math.min(1e3,.9*window.innerWidth),r=e.clientHeight/e.clientWidth,a=e.cloneNode(!0);a.removeAttribute("width"),I(e,a),D({dataSource:[{html:a.outerHTML,width:t,height:t*r}]}),v.value&&P(f.value,v.value)}function C(){if(!f.value){const e=s.value.querySelector("svg");A(e)}f.value.loadAndOpen(0)}async function R(){if(s.value)try{h.value=!1,g.value=null,k(m)&&!u.value&&await M();const e=(await l(async()=>{const{default:a}=await import("./DJLrHLQR.js").then(n=>n.bz);return{default:a}},__vite__mapDeps([1,2,3]),import.meta.url)).default;e.initialize({startOnLoad:!1,securityLevel:"loose",markdownAutoWrap:!1,flowchart:{useMaxWidth:!0,padding:10,wrappingWidth:400},theme:"base"}),_.value=await V(m),await e.parse(_.value,{suppressErrors:!1});const{svg:t}=await e.render(S,_.value,s.value);s.value.innerHTML=t;const r=s.value.querySelector("svg");r==null||r.addEventListener("click",C)}catch(e){h.value=!0,g.value=e instanceof Error?e.message:String(e)}}let o=null;return z(()=>{o=new IntersectionObserver(e=>{e[0].isIntersecting&&(b.value=!0,R(),o==null||o.disconnect(),o=null)},{threshold:.1}),s.value&&o.observe(s.value)}),B(()=>{o&&(o.disconnect(),o=null)}),(e,t)=>{const r=Z;return w(),F(X,{caption:j(L).caption,onCaptionMounted:t[0]||(t[0]=a=>v.value=a)},{default:q(()=>[h.value?(w(),$("div",{key:0,class:E(e.$style.error)},[x("div",{class:E(e.$style.errorMessage)},[t[1]||(t[1]=x("span",null,"Diagram Error:",-1)),K(" "+Q(g.value),1)],2)],2)):(w(),$("div",{key:1,ref:"diagram",class:E([e.$style.diagram,!b.value&&e.$style.placeholder])},[U(r)],2)),x("div",{ref_key:"katexPreloadEl",ref:y,style:{position:"absolute",visibility:"hidden",height:"0",width:"0",overflow:"hidden"}},null,512)]),_:1},8,["caption"])}}}),te="_diagram_1hg8c_1",ae="_placeholder_1hg8c_7",re="_error_1hg8c_29",oe="_errorMessage_1hg8c_40",se={diagram:te,placeholder:ae,error:re,errorMessage:oe},ie={$style:se},ge=G(ee,[["__cssModules",ie]]);export{ge as default};
