const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./katex.CEY6f2P4.css","./B5kvbfzG.js","./DVyLGYbM.js","./entry.DVQcDARy.css"])))=>i.map(i=>d[i]);
import{j as A,a0 as P,r as i,a7 as R,a5 as W,K as O,f as N,o as f,w as B,c as L,D as v,a as $,d as H,t as z,b as F,a8 as q,n as K,i as h,_ as j}from"./DVyLGYbM.js";import"./BLgJZKMa.js";import{u as U}from"./UCVi3yFq.js";import{F as G}from"./DWg5QG47.js";import{u as J}from"./DwgVa4fJ.js";import"./BGjcAt5f.js";import"./B-7B0SHZ.js";import"./BGu6WGug.js";const Q=A({__name:"Diagram",props:{node:{}},setup(re){const y=U(),w=y.content,o=P("diagram"),d=i(w),{lightbox:p,initLightbox:x,registerCaption:M}=J(),m=i(null),b=i(!1),_=i(null),g=i(!1),E="__mermaid__"+R(),l={display:/\$\$(.*?)\$\$/gs,inline:new RegExp("\\$(?!\\$)(.*?)(?<!\\$)\\$","gs")};function D(e){return l.display.test(e)||l.inline.test(e)}async function S(e){if(!D(e))return e;await h(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const a=await h(()=>import("./ChWnQ-fc.js"),[],import.meta.url),r=(n,u,c)=>n.replace(u,(se,T)=>a.default.renderToString(T,{displayMode:c}));let t=e;return t=r(t,l.display,!0),t=r(t,l.inline,!1),t}function k(e,a){const r=["--text","--textLabel","--bgNode","--bgLabel","--border","--filled","--link"],t=getComputedStyle(e);let n="";r.forEach(u=>{const c=t.getPropertyValue(u).trim();c&&(n+=`${u}: ${c}; `)}),a.setAttribute("style",n)}function C(e){const a=Math.min(1e3,.9*window.innerWidth),r=e.clientHeight/e.clientWidth,t=e.cloneNode(!0);t.removeAttribute("width"),k(e,t),x({dataSource:[{html:t.outerHTML,width:a,height:a*r}]}),m.value&&M(p.value,m.value)}function V(){if(!p.value){const e=o.value.querySelector("svg");C(e)}p.value.loadAndOpen(0)}async function I(){if(o.value)try{g.value=!1,_.value=null;const e=(await h(async()=>{const{default:t}=await import("./B5kvbfzG.js").then(n=>n.bz);return{default:t}},__vite__mapDeps([1,2,3]),import.meta.url)).default;e.initialize({startOnLoad:!1,securityLevel:"loose",markdownAutoWrap:!1,flowchart:{useMaxWidth:!0,padding:10,wrappingWidth:400},theme:"base"}),d.value=await S(w),await e.parse(d.value,{suppressErrors:!1});const{svg:a}=await e.render(E,d.value,o.value);o.value.innerHTML=a;const r=o.value.querySelector("svg");r==null||r.addEventListener("click",V)}catch(e){g.value=!0,_.value=e instanceof Error?e.message:String(e)}}let s=null;return W(()=>{s=new IntersectionObserver(e=>{e[0].isIntersecting&&(b.value=!0,I(),s==null||s.disconnect(),s=null)},{threshold:.1}),o.value&&s.observe(o.value)}),O(()=>{s&&(s.disconnect(),s=null)}),(e,a)=>{const r=q;return f(),N(G,{caption:K(y).caption,onCaptionMounted:a[0]||(a[0]=t=>m.value=t)},{default:B(()=>[g.value?(f(),L("div",{key:0,class:v(e.$style.error)},[$("div",{class:v(e.$style.errorMessage)},[a[1]||(a[1]=$("span",null,"Diagram Error:",-1)),H(" "+z(_.value),1)],2)],2)):(f(),L("div",{key:1,ref:"diagram",class:v([e.$style.diagram,!b.value&&e.$style.placeholder])},[F(r)],2))]),_:1},8,["caption"])}}}),X="_diagram_1hg8c_1",Y="_placeholder_1hg8c_7",Z="_error_1hg8c_29",ee="_errorMessage_1hg8c_40",te={diagram:X,placeholder:Y,error:Z,errorMessage:ee},ae={$style:te},me=j(Q,[["__cssModules",ae]]);export{me as default};
