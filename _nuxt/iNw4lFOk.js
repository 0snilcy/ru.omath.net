import{j as P,c as f,o as c,D as d,a as k,n as _,Z as Q,$ as W,_ as I,F as U,M as E,b as T,w as B,d as V,Y as O,t as C,ad as K,f as w,az as N,X as H,k as X,a0 as S,r as F,a3 as A,a1 as x,p as j,C as ee,l as Y,q as Z,e as te,aj as ne,aA as J,ak as R,aB as se,aC as oe,m as ae,aD as z,u as ie,a5 as re,aE as ce,aF as q,aG as le,h as L,ax as pe}from"./DVyLGYbM.js";import{u as ue}from"./Dtz2W1IV.js";import{u as de,a as _e,s as me,b as fe}from"./m7JeSth_.js";const ve=["src"],ge=P({__name:"ContentDecoration",props:{decoration:{}},setup(i){const e=Q();return(s,o)=>(c(),f("div",{class:d(s.$style.contentDecoration)},[k("img",{src:_(e)(("contentAsset"in s?s.contentAsset:_(W))(s.decoration))},null,8,ve)],2))}}),ye="_contentDecoration_1catu_1",$e={contentDecoration:ye},be={$style:$e},tt=Object.assign(I(ge,[["__cssModules",be]]),{__name:"MainUtilsContentDecoration"}),he=P({__name:"Breadcrumb",props:{context:{}},setup(i){const e=K({prefetch:!1});function s(o){return o}return(o,a)=>{const u=O;return c(),f("section",{class:d(o.$style.breadcrumb)},[(c(!0),f(U,null,E(o.context.slice(0,-1).filter(l=>!l.hidden),l=>(c(),f(U,null,[T(_(e),{to:l.href,class:d(o.$style.breadcrumbItem)},{default:B(()=>[T(u,{name:l.icon,wrapper:"span"},null,8,["name"]),V(" "+C(l.title),1)]),_:2},1032,["to","class"]),T(u,{class:d(o.$style.sep),name:"angle-right"},null,8,["class"])],64))),256))],2)}}}),we="_breadcrumb_1e1w1_1",Me="_breadcrumbItem_1e1w1_19",Ce="_sep_1e1w1_34",ke={breadcrumb:we,breadcrumbItem:Me,sep:Ce},Te={$style:ke},nt=Object.assign(I(he,[["__cssModules",Te]]),{__name:"MainUtilsBreadcrumb"}),Pe=P({__name:"ContentTitle",props:{icon:{},title:{},hint:{}},setup(i){return(e,s)=>{const o=O,a=H;return c(),f("section",{class:d(e.$style.contentTitle)},[_(N)(e.icon)?(c(),w(o,{key:0,name:e.icon,title:e.hint},null,8,["name","title"])):(c(),w(a,{key:1,name:"content-title-icon",svg:e.icon,title:e.hint},null,8,["svg","title"])),k("h1",null,C(e.title),1)],2)}}}),Ie="_contentTitle_p3ocd_1",De={contentTitle:Ie},Ue={$style:De},st=Object.assign(I(Pe,[["__cssModules",Ue]]),{__name:"MainUtilsContentTitle"}),Be=P({__name:"ContentDescription",props:{description:{}},async setup(i){let e,s;const o=([e,s]=X(()=>ue()),e=await e,s(),e);return(a,u)=>(c(),f("section",{class:d(a.$style.contentDescription)},C(_(o)(a.description)),3))}}),Fe="_contentDescription_x6dlr_1",je={contentDescription:Fe},Oe={$style:je},ot=Object.assign(I(Be,[["__cssModules",Oe]]),{__name:"MainUtilsContentDescription"}),Se={key:2},Ae=400,Le=100,Ee=P({__name:"ContentPopover",props:{data:{}},setup(i){const e=S("reference"),s=S("popover"),o=S("popover-arrow"),{floatingStyles:a,middlewareData:u}=de(e,s,{whileElementsMounted:_e,middleware:[me({boundary:(document==null?void 0:document.querySelector("[erudit-main]"))||void 0}),fe({element:o})]}),l=F(!1);let v,t;function y(n){clearTimeout(t),clearTimeout(v),n?l.value=!0:v=setTimeout(()=>{l.value=!0},Ae)}function b(){clearTimeout(v),t=setTimeout(()=>{l.value=!1},Le)}return(n,p)=>{const r=O,m=H,$=x;return c(),f("div",{ref:"reference",class:d(n.$style.reference),style:A(`--popoverColor: ${n.data.color}`),onMouseenter:p[0]||(p[0]=()=>y()),onMouseleave:b,onClick:p[1]||(p[1]=()=>y(!0))},[_(N)(n.data.icon)?(c(),w(r,{key:0,name:n.data.icon},null,8,["name"])):(c(),w(m,{key:1,name:"popover-icon",svg:n.data.icon},null,8,["svg"])),V(" "+C(n.data.title)+" ",1),T($,null,{default:B(()=>{var g,h;return[_(l)?(c(),f("div",{key:0,ref:"popover",class:d(n.$style.popover),style:A(_(a))},[k("div",{ref:"popover-arrow",class:d(n.$style.arrow),style:A({position:"absolute",top:((g=_(u).arrow)==null?void 0:g.y)!=null?`${_(u).arrow.y}px`:"",left:((h=_(u).arrow)==null?void 0:h.x)!=null?`${_(u).arrow.x}px`:""})},null,6),k("div",{class:d(n.$style.inner)},[_(N)(n.data.icon)?(c(),w(r,{key:0,class:d(n.$style.floatIcon),name:n.data.icon},null,8,["class","name"])):(c(),w(m,{key:1,class:d(n.$style.floatIcon),name:"popover-icon",svg:n.data.icon},null,8,["class","svg"])),k("div",{class:d(n.$style.title)},C(n.data.title),3),n.data.description?(c(),f("div",Se,C(n.data.description),1)):j("",!0),ee(n.$slots,"default")],2)],6)):j("",!0)]}),_:3})],38)}}}),Ne="_reference_ouigi_1",Re="_popover_ouigi_21",Ve="_arrow_ouigi_31",ze="_inner_ouigi_40",qe="_floatIcon_ouigi_50",Ge="_title_ouigi_56",He={reference:Ne,popover:Re,arrow:Ve,inner:ze,floatIcon:qe,title:Ge},Xe={$style:He},G=Object.assign(I(Ee,[["__cssModules",Xe]]),{__name:"MainUtilsContentPopover"}),Ye=P({__name:"ContentPopovers",props:{generic:{}},async setup(i){let e,s;const o=i,a=([e,s]=X(()=>Y("flag_dev","flag_dev_description","flag_advanced","flag_advanced_description","flag_secondary","flag_secondary_description","popover_dependencies","popover_dependencies_description")),e=await e,s(),e),u={dev:{icon:"construction",color:"var(--warn)",title:a.flag_dev,description:a.flag_dev_description},advanced:{icon:"asterisk",color:"#7c67ac",title:a.flag_advanced,description:a.flag_advanced_description},secondary:{icon:"puzzle",color:"#7faf35",title:a.flag_secondary,description:a.flag_secondary_description}},l={icon:"shuffle",color:"#47baa9",title:a.popover_dependencies,description:a.popover_dependencies_description},v=Z(()=>{var t,y,b;return!!((t=o.generic)!=null&&t.flags&&((y=Object.keys(o.generic.flags))!=null&&y.length)||(b=o.generic)!=null&&b.dependencies)});return(t,y)=>{var p;const b=O,n=te;return _(v)?(c(),f("section",{key:0,class:d(t.$style.popovers)},[(c(!0),f(U,null,E(Object.keys(t.generic.flags),r=>(c(),w(G,{data:u[r]},null,8,["data"]))),256)),(p=t.generic)!=null&&p.dependencies?(c(),w(G,{key:0,data:l},{default:B(()=>[k("ul",{class:d(t.$style.dependenciesList)},[(c(!0),f(U,null,E(t.generic.dependencies,(r,m)=>(c(),f("li",null,[T(b,{name:"arrow-left",wrapper:"span"}),T(n,{prefetch:!1,to:m},{default:B(()=>[V(C(r),1)]),_:2},1032,["to"])]))),256))],2)]),_:1})):j("",!0)],2)):j("",!0)}}}),Ze="_popovers_1wpsg_1",Je="_dependenciesList_1wpsg_8",Qe={popovers:Ze,dependenciesList:Je},We={$style:Qe},at=Object.assign(I(Ye,[["__cssModules",We]]),{__name:"MainUtilsContentPopovers"});function it(){var l,v;const i=ne(),e=J(),s="content-data",o=(v=i.static.data)[s]||(v[s]=(l=i.payload.data)[s]||(l[s]={})),a=F();let u;return R(()=>{u=(async()=>{if(!e.value){a.value=void 0;return}const t=e.value.contentId,y=o[t]||(o[t]=await $fetch("/api/content/data",{query:{contentId:t}}));return a.value=y,a})()}),u}function rt(i){const e=J(),s=se(),o=oe(),a=Y("article","summary","practice","site_info_title","seo_article_description","seo_summary_description","seo_practice_description"),u=()=>{setTimeout(()=>{const p=(()=>{var r,m,$;switch((r=e.value)==null?void 0:r.type){case"topic":const g=e.value.topicPart;return(($=(m=L.site)==null?void 0:m.favicon)==null?void 0:$[g])||pe(`favicon/${g}.svg`)}return q})();o.value=p},500)};let l,v;const t={title:F(),description:F()},y=()=>{l=(async()=>{var m,$,g,h,D;const p=await a;let r="";if(r+=(($=(m=i.value.generic)==null?void 0:m.seo)==null?void 0:$.title)||i.value.generic.title||i.value.generic.contentId.split("/").pop(),e.value.type==="topic"){const M=e.value.topicPart;M!=="article"&&(r+=` | ${p[M]}`)}if(i.value.type!=="book"){const M=(g=i.value)==null?void 0:g.bookTitle;r+=M?` | ${M}`:""}r+=" - "+(((h=L.seo)==null?void 0:h.title)||((D=L.site)==null?void 0:D.title)||p.site_info_title),t.title.value=r})()},b=()=>{v=(async()=>{var m,$,g,h,D;const p=await a,r=(($=(m=i.value.generic)==null?void 0:m.seo)==null?void 0:$.description)||((g=i.value.generic)==null?void 0:g.description);if(r){t.description.value=r.trim().replace(/\n/g," ");return}if(e.value.type==="topic"){const M=p[`seo_${e.value.topicPart}_description`];t.description.value=M(((D=(h=i.value.generic)==null?void 0:h.seo)==null?void 0:D.title)||i.value.generic.title);return}t.description.value=""})()};ae({title:t.title,ogTitle:t.title,description:t.description,ogDescription:t.description});const n=Z(()=>{var p,r;return[...z(s,le),...(p=i.value.generic)!=null&&p.ogImage?z(s,(r=i.value.generic)==null?void 0:r.ogImage):[]]});return ie({meta:n}),R(()=>{y(),b()}),re(()=>{R(()=>{u()})}),ce(()=>{o.value=q}),Promise.all([l,v])}export{nt as B,tt as C,rt as a,st as b,ot as c,at as d,it as u};
